<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- This file has been adapted for the needs of imogene by                      -->
<!-- HervÃ© Rouault <rouault@lps.ens.fr>                                          -->
<!--                                                                             -->
<!--                                                                             -->
<!-- XML Authors: Corinne Maufrais                                               -->
<!-- 'Biological Software and Databases' Group, Institut Pasteur, Paris.         -->
<!-- Distributed under LGPLv2 License. Please refer to the COPYING.LIB document. -->
<program>
    <head xmlns:xi="http://www.w3.org/2001/XInclude">
        <name>@PACKAGE_NAME@</name>
        <version>@PACKAGE_VERSION@</version>
        <doc>
            <title>@PACKAGE_NAME@</title>
            <description>
                <text lang="en">Genomewide identification of cis-regulatory
                    motifs and modules</text>
            </description>
            <authors>H. Rouault, K. Mazouni, L. Couturier, V. Hakim
                and F. Schweisguth</authors>
            <reference>Genome-wide identification of cis-regulatory motifs and
                modules underlying gene coregulation using statistics and
                phylogeny. Proc. Natl. Acad. Sci. U.S.A., 107:14615-14620,
                Aug 2010.</reference>
            <doclink>https://github.com/hrouault/Imogene</doclink>
            <comment>
                <div xmlns="http://www.w3.org/1999/xhtml">
                    <em> Imogene</em> aims at two main purposes:
                    <ul>
                        <li>it detects statistically overrepresented motifs,
                            considering closely related genomes, in a set of
                            training sequences. These sequences are generally
                            selected for their biological relationships,
                            ie cis-regulatory role.
                        </li>
                        <li>it predicts novel cis-regulatory sequences based
                            on user-selected motifs at the whole genome scale.
                        </li>
                    </ul>
                    <p>Currently, <em>Imogene</em> supports two genome sets:
                        mammals and drosophilae, but we are open to integrating
                        other sets if you feel interested.</p>

                    <p>The source code of Imogene is available on
                        <em>github</em>: <a href="https://github.com/hrouault/Imogene">https://github.com/hrouault/Imogene</a>.
                        It contains the main source code, as well as a
                        documentation and local installation instructions.
                        An online manual can also be found <a href="http://hrouault.github.com/Imogene">here</a>.
                        Any trouble concerning its installation or bugs should
                        be addressed on <em>github</em>.</p>

                    <p>Please, feel free to contact us for any question
                        concerning <em>Imogene</em>: Herve Rouault
                        <a href="mailto:herve.rouault@pasteur.fr">herve.rouault@pasteur.fr</a>,
                        Marc Santolini <a href="mailto:santolin@lps.ens.fr">santolin@lps.ens.fr</a>.</p>
                </div>
            </comment>
        </doc>
        <category>sequence:nucleic:regulation</category>
        <xi:include href="../../../Local/Services/Programs/Env/imogene_env.xml" xpointer="xpointer(//env)">
            <xi:fallback/>
        </xi:include>
    </head>
    <parameters>

        <parameter ismandatory="1" issimple="1">
            <name>model</name>
            <prompt lang="en">Execution mode</prompt>
            <type>
                <datatype>
                    <class>Choice</class>
                </datatype>
            </type>
            <vdef>
                <value>null</value>
            </vdef>
            <vlist>
                <velem undef="1">
                    <value>null</value>
                    <label>Choice</label>
                </velem>
                <velem>
                    <value>genmot</value>
                    <label>genmot: Generate motifs from a training set</label>
                </velem>
                <velem>
                    <value>scangen</value>
                    <label>scangen: Find instances of a list of motifs in the
                        genome</label>
                </velem>
            </vlist>
            <comment>
                <div xmlns="http://www.w3.org/1999/xhtml">
                    <em>Imogene</em> has two different modes of execution that
                    can be performed sequentially:
                    <ul>
                        <li><strong>genmot</strong>: generates motifs from a
                            set of functionally related CRMs</li>
                        <li><strong>scangen</strong>: predicts enhancers from
                            a set of motifs usually generated with the
                            <em>scangen</em> mode.</li>
                    </ul>
                </div>
            </comment>
        </parameter>

        <paragraph>
            <name>general</name>
            <prompt lang="en">General options</prompt>
            <argpos>1</argpos>
            <parameters>

                <parameter ismandatory="1" issimple="1">
                    <name>species</name>
                    <prompt lang="en">Family of species to consider</prompt>
                    <type>
                        <datatype>
                            <class>Choice</class>
                        </datatype>
                    </type>
                    <vdef>
                        <value>null</value>
                    </vdef>
                    <vlist>
                        <velem undef="1">
                            <value>null</value>
                            <label>Choice</label>
                        </velem>
                        <velem>
                            <value>droso</value>
                            <label>Drosophilae</label>
                        </velem>
                        <velem>
                            <value>eutherian</value>
                            <label>Eutherians</label>
                        </velem>
                    </vlist>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            Two families of genomes are currently supported by
                            <em>Imogene</em>:
                            <ul>
                                <li><strong>Drosophilae</strong>: genomes from
                                    the 12 genomes project (A. G. Clark,
                                    <em>et al</em>. Evolution of genes and
                                    genomes on the Drosophila phylogeny.
                                    <em>Nature</em>, 450(7167):203-218,
                                    Nov 2007.)</li>
                                <li><strong>Eutherian</strong>: genomes from
                                    the ensembl project (<a href="http://www.ensembl.org/">http://www.ensembl.org/</a>,
                                    folder epo_12_eutherian)</li>
                            </ul>
                        </div>
                    </comment>
                </parameter>

                <parameter ismandatory="1">
                    <name>width</name>
                    <prompt lang="en">Width of the motif</prompt>
                    <type>
                        <datatype>
                            <class>Integer</class>
                        </datatype>
                    </type>
                    <vdef>
                        <value>10</value>
                    </vdef>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            Motifs represent the affinity of transcription
                            factors for binding sites (BS). Indicate here the
                            <em>width</em> of BSs in number of nucleotides.
                            Values between 8 and 12 have given good results.
                            Note that motifs of larger width can model motifs
                            of lower width when flanking bases have the
                            frequencies of background (non-specific non-coding
                            sequences). Large motifs are however more difficult
                            to infer when containing many degenerate bases.
                        </div>
                    </comment>
                </parameter>

                <parameter ismandatory="1">
                    <name>threshold</name>
                    <prompt lang="en">Threshold used for motif scanning</prompt>
                    <type>
                        <datatype>
                            <class>Float</class>
                        </datatype>
                    </type>
                    <vdef>
                        <value>10.0</value>
                    </vdef>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            The <em>threshold</em>, expressed in bits,
                            corresponds to the level of specificity of a
                            motif. As an order of magnitude, a threshold equal
                            to 10 corresponds approximatively to one binding
                            site every 1000 bases on average in the whole
                            genome. Common values, that give reasonable results
                            are comprised between 10 and 15.
                        </div>
                    </comment>
                </parameter>

                <parameter ismandatory="1">
                    <name>extent</name>
                    <prompt lang="en">Allowed shift of the motif position on
                        other species</prompt>
                    <type>
                        <datatype>
                            <class>Integer</class>
                        </datatype>
                    </type>
                    <vdef>
                        <value>20</value>
                    </vdef>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p>In order to be robust to mistakes in the
                                alignments, <em>Imogene</em> allows for local
                                shifts of the binding sites in homologous
                                sequences.</p>

                            <p>Considering the first base of a binding site in
                                a reference species, an alignment will make it
                                correspond to a position <em>p</em> in an
                                homologous genomes. The algorithm will then
                                search for binding sites in this homologous
                                species at positions <em>(p-s,p+w+s)</em>,
                                where <em>s</em> is the shift indicated here
                                and <em>w</em> is the width of the motif.</p>
                        </div>
                    </comment>
                </parameter>

            </parameters>
        </paragraph>

        <paragraph>
            <name>genmot</name>
            <prompt lang="en">Genmot options</prompt>
            <precond>
                <code proglang="perl">$model == 'genmot'</code>
                <code proglang="python">model == 'genmot'</code>
            </precond>
            <argpos>2</argpos>
            <parameters>

                <parameter ismandatory="1">
                    <name>evolutionary</name>
                    <prompt lang="en">Evolutionary model used for motif
                        generation</prompt>
                    <type>
                        <datatype>
                            <class>Choice</class>
                        </datatype>
                    </type>
                    <vdef>
                        <value>1</value>
                    </vdef>
                    <vlist>
                        <velem>
                            <value>1</value>
                            <label>Felsenstein model</label>
                        </velem>
                        <velem>
                            <value>2</value>
                            <label>Halpern-Bruno model</label>
                        </velem>
                    </vlist>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p><em>Imogene</em> makes use of the evolution of
                                binding sites to infer motifs. In order to
                                function, <em>Imogene</em> consider the
                                mutation rate of bases under selection thanks
                                to an evolutionary model.</p>

                            <p>Two models are currently supported by
                                <em>Imogene</em> (see refs at the end of the
                                page for a detailed description):
                                <ul><li>Felsentein: this model is more
                                        approximative but runs faster</li>
                                    <li>Halpern-Bruno: this model is better
                                        justified theoretically and better
                                        predicts the speed of evolution of the
                                        motifs but takes more time to
                                        run.</li></ul></p>
                        </div>
                    </comment>
                </parameter>

                <parameter ismandatory="1" issimple="1">
                    <name>coord_file</name>
                    <prompt lang="en">File of enhancer coordinates</prompt>
                    <type>
                        <datatype>
                            <class>Coordinates</class>
                            <superclass>AbstractText</superclass>
                        </datatype>
                    </type>
                    <comment>
                        <text lang="en">list of sequence coordinates in the BED4 format:</text>
                        <text lang="en">sequence_name chromosome_arm start_pos stop_pos</text>
                        <text lang="en">For drosophilae, coordinates should correspond to the release 5 assembly.</text>
                    </comment>
                    <example>chr1    6719314    6720399   ST18(intragenic)
chr1  167864366  167866439   POU2F1(intragenic)
chr1  179080168  179081586   AKT3(intragenic)
chr3   16776170   16778776   YTHDF3-BHLHB5
chr4   98961102   98962673   APG4C-FOXD3
chr4   99040833   99042291   APG4C-FOXD3
chr4   99240573   99241457   ATG4C-FOXD3
chr6  137772070  137773298   DERA(intragenic)
chr7   37729672   37730763   ZNF536-ZNF537
chr9   71823775   71824538   TCF12(intragenic)
chr11  25256346   25257683   FANCL-BCL11A
chr11  44469978   44471372   EBF1(intragenic)
chr12  47121350   47122759   STXBP6-NOVA1
chr13  73170587   73173631   IRX4-IRX2
chrX   57972482   57973750   LOC347487-SOX3</example>
                </parameter>

                <parameter ishidden="1">
                    <name>cmd_1</name>
                    <type>
                        <datatype>
                            <class>String</class>
                        </datatype>
                    </type>
                    <format>
                        <code proglang="python">"imogene extract -s " + species + " -i " + coord_file +" &amp;&amp; "</code>
                    </format>
                    <argpos>1</argpos>
                </parameter>

                <parameter ishidden="1">
                    <name>cmd_2</name>
                    <type>
                        <datatype>
                            <class>String</class>
                        </datatype>
                    </type>
                    <format>
                        <code proglang="python">" imogene genmot -s " + species + " -w " + str(width) + " -t " + str(threshold) + " -x " + str(extent) + " -e " + str(evolutionary) + " -a align &amp;&amp;" </code>
                    </format>
                    <argpos>2</argpos>
                </parameter>

                <parameter ishidden="1">
                    <name>cmd_3</name>
                    <type>
                        <datatype>
                            <class>String</class>
                        </datatype>
                    </type>
                    <format>
                        <code proglang="python">" imogene display -t "+ str(threshold) +" -s " + species +" -m motifs.txt -a align --logos --pdf --png &amp;&amp;"</code>
                    </format>
                    <argpos>3</argpos>
                </parameter>

                <parameter ishidden="1">
                    <name>cmd_4</name>
                    <type>
                        <datatype>
                            <class>String</class>
                        </datatype>
                    </type>
                    <format>
                        <code proglang="python">" imogene display -t "+ str(threshold) +" -s " + species +" -m motifs.txt -a align --html-ref"</code>
                    </format>
                    <argpos>4</argpos>
                </parameter>

                <parameter isout="1">
                    <name>motifs</name>
                    <prompt>Motif file</prompt>
                    <type>
                        <datatype>
                            <class>ScangenMotifDefinition</class>
                            <superclass>AbstractText</superclass>
                        </datatype>
                    </type>
                    <filenames>
                        <code proglang="perl">"motifs.txt"</code>
                        <code proglang="python">"motifs.txt"</code>
                    </filenames>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p>Predicted motifs in text file format. This file
                                can be used as input for the <em>scangen</em>
                                mode</p>
                        </div>
                    </comment>
                </parameter>

                <parameter isout="1">
                    <name>genmotoutput</name>
                    <prompt>General output</prompt>
                    <type>
                        <datatype>
                            <class>GenmotReport</class>
                            <superclass>Report</superclass>
                        </datatype>
                        <dataFormat>HTML</dataFormat>
                    </type>
                    <filenames>
                        <code proglang="python">"results_genmot.html"</code>
                    </filenames>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p>Predicted motifs in pretty printed format
                                (xhtml). This page contain motif logos.</p>
                        </div>
                    </comment>
                </parameter> 

                <parameter isout="1">
                   <name>motif_png_out</name>
                   <type>
                     <datatype>
	                <class>Logo</class>
                        <superclass>Binary</superclass>
                     </datatype>
                     <dataFormat>png</dataFormat>
                   </type>
                   <filenames>
                     <code proglang="python">"Motif*.png"</code>
                   </filenames>
                </parameter>

                <parameter isout="1">
                   <name>motif_pdf_out</name>
                   <type>
                     <datatype>
	                <class>Logo</class>
                        <superclass>Binary</superclass>
                     </datatype>
                     <dataFormat>pdf</dataFormat>
                   </type>
                   <filenames>
                     <code proglang="python">"Motif*.pdf"</code>
                   </filenames>
                </parameter>

            </parameters>
        </paragraph>


        <paragraph>
            <name>scangen</name>
            <prompt lang="en">Scangen options</prompt>
            <precond>
                <code proglang="perl">$model == 'scangen'</code>
                <code proglang="python">model == 'scangen'</code>
            </precond>
            <argpos>2</argpos>
            <parameters>

                <parameter ismandatory="1">
                    <name>crmwidth</name>
                    <prompt lang="en">Width of selected enhancers</prompt>
                    <type>
                        <datatype>
                            <class>Integer</class>
                        </datatype>
                    </type>
                    <vdef>
                        <value>1000</value>
                    </vdef>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p>Width of the predicted enhancers in number of
                                nucleotides (nt).</p>
                        </div>
                    </comment>
                </parameter>

                <parameter ismandatory="1">
                    <name>nbmots</name>
                    <prompt lang="en">Number of motifs to consider at maximum</prompt>
                    <type>
                        <datatype>
                            <class>Integer</class>
                        </datatype>
                    </type>
                    <vdef>
                        <value>5</value>
                    </vdef>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p>Enhancers are predicted on the basis of the
                                presence of binding sites corresponding to
                                chosen motifs. You must input an ordered list of
                                motifs generated either by yourself or by the <em>genmot</em> mode. The number of considered motifs will be the top <em>n</em>, where <em>n</em> is the integer indicated here.</p>
                        </div>
                    </comment>
                </parameter>

                <parameter ismandatory="1" issimple="1">
                    <name>motifs_file</name>
                    <prompt lang="en">File containing a list of motif definitions</prompt>

                    <type>
                        <datatype>
                            <class>ScangenMotifDefinition</class>
                            <superclass>AbstractText</superclass>
                        </datatype>
                    </type>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p>List of motif definition in format identical to
                                the output of the <em>genmot</em> mode.</p>
                        </div>
                    </comment>
                </parameter>

                <parameter ishidden="1">
                    <name>cmdscangen_1</name>
                    <type>
                        <datatype>
                            <class>String</class>
                        </datatype>
                    </type>
                    <format>
                        <code proglang="python">"imogene scangen -s " + species + " -t " + str(threshold) + " -x " + str(extent) + " -m " + motifs_file + " --scanwidth=" + str(crmwidth) + "&amp;&amp; "</code>
                    </format>
                    <argpos>1</argpos>
                </parameter>

                <parameter ishidden="1">
                    <name>cmdscangen_2</name>
                    <type>
                        <datatype>
                            <class>String</class>
                        </datatype>
                    </type>
                    <format>
                        <code proglang="python">" imogene display -e result*.dat"</code>
                    </format>
                    <argpos>2</argpos>
                </parameter>

                <parameter isout="1">
                    <name>scangenOuthtml</name>
                    <prompt>Scangen output</prompt>
                    <type>
                        <datatype>
                            <class>ScangenReport</class>
                            <superclass>Report</superclass>
                        </datatype>
                        <dataFormat>HTML</dataFormat>
                    </type>
                    <filenames>
                        <code proglang="python">"results_scangen.html"</code>
                    </filenames>
                    <comment>
                        <div xmlns="http://www.w3.org/1999/xhtml">
                            <p>List of predicted enhancers, from the most
                                concentrated in motif to the less enriched. The
                                number of binding sites for each motif is also
                                indicated.</p>
                        </div>
                    </comment>
                </parameter> 

            </parameters>
        </paragraph>

    </parameters>
</program>
